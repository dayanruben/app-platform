
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lightweight application framework for state and memory management suitable for Kotlin Multiplatform projects.">
      
      
      
        <link rel="canonical" href="https://amzn.github.io/app-platform/presenter/">
      
      
        <link rel="prev" href="../scope/">
      
      
        <link rel="next" href="../renderer/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Presenter - App Platform</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Presenter - App Platform" >
      
        <meta  property="og:description"  content="A lightweight application framework for state and memory management suitable for Kotlin Multiplatform projects." >
      
        <meta  property="og:image"  content="https://amzn.github.io/app-platform/assets/images/social/presenter.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://amzn.github.io/app-platform/presenter/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Presenter - App Platform" >
      
        <meta  name="twitter:description"  content="A lightweight application framework for state and memory management suitable for Kotlin Multiplatform projects." >
      
        <meta  name="twitter:image"  content="https://amzn.github.io/app-platform/assets/images/social/presenter.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#presenter" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="App Platform" class="md-header__button md-logo" aria-label="App Platform" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            App Platform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Presenter
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/amzn/app-platform" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    app-platform
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../setup/" class="md-tabs__link">
        
  
  
    
  
  Setup

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../module-structure/" class="md-tabs__link">
        
  
  
    
  
  Module Structure

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../scope/" class="md-tabs__link">
        
  
  
    
  
  Scope

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Presenter

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../renderer/" class="md-tabs__link">
        
  
  
    
  
  Renderer

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../template/" class="md-tabs__link">
        
  
  
    
  
  Template

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../di/" class="md-tabs__link">
        
  
  
    
  
  DI Framework

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../testing/" class="md-tabs__link">
        
  
  
    
  
  Testing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../faq/" class="md-tabs__link">
        
  
  
    
  
  FAQ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="App Platform" class="md-nav__button md-logo" aria-label="App Platform" data-md-component="logo">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    App Platform
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/amzn/app-platform" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    app-platform
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../module-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Structure
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scope
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Presenter
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Presenter
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#unidirectional-dataflow" class="md-nav__link">
    <span class="md-ellipsis">
      Unidirectional dataflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moleculepresenter" class="md-nav__link">
    <span class="md-ellipsis">
      MoleculePresenter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-driven-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Model driven navigation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parent-child-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Parent child communication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching" class="md-nav__link">
    <span class="md-ellipsis">
      Launching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compose-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Compose runtime
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compose runtime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#side-effects" class="md-nav__link">
    <span class="md-ellipsis">
      Side effects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../renderer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Renderer
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../di/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DI Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="presenter">Presenter<a class="headerlink" href="#presenter" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While App Platform has a generic <code>Presenter</code> interface to remove coupling, we strongly recommend using
<code>MoleculePresenter</code> for implementations. <code>MoleculePresenters</code> are an opt-in feature through the Gradle DSL.
The default value is <code>false</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">appPlatform</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="n">enableMoleculePresenters</span><span class="w"> </span><span class="kc">true</span>
<span class="o">}</span>
</code></pre></div>
</div>
<h2 id="unidirectional-dataflow">Unidirectional dataflow<a class="headerlink" href="#unidirectional-dataflow" title="Permanent link">&para;</a></h2>
<p>App Platform implements the unidirectional dataflow pattern to decouple business logic from UI rendering. Not only
does this allow for better testing of business logic and provides clear boundaries, but individual apps can also
share more code and change the look and feel when needed.</p>
<h2 id="moleculepresenter"><code>MoleculePresenter</code><a class="headerlink" href="#moleculepresenter" title="Permanent link">&para;</a></h2>
<p>In the unidirectional dataflow pattern events and state only travel into one direction through a single stream.
State is produced by <code>Presenters</code> and can be observed through a reactive stream:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">Presenter</span><span class="o">&lt;</span><span class="n">ModelT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BaseModel</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">ModelT</span><span class="o">&gt;</span>
<span class="p">}</span>
</code></pre></div>
<p><code>Presenters</code> can be implemented in many ways as long as they can be converted to this interface. App Platform
provides and recommends the implementation using <a href="https://github.com/cashapp/molecule">Molecule</a> since it provides
many advantages. Molecule is a library that turns a <code>@Composable</code> function into a <code>StateFlow</code>. It leverages the
core of <a href="https://developer.android.com/compose">Compose</a> without bringing in Compose UI as dependency. The primary
use case of Compose is handling, creating and modifying tree-like data structures, which is a natural fit for
UI frameworks. Molecule reuses Compose to handle state management and state transitions to implement business
logic in the form of <code>@Composable</code> functions with all the benefits that Compose provides.</p>
<p>The <a href="https://github.com/amzn/app-platform/blob/main/presenter-molecule/public/src/commonMain/kotlin/software/amazon/app/platform/presenter/molecule/MoleculePresenter.kt">MoleculePresenter</a>
interface looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">MoleculePresenter</span><span class="o">&lt;</span><span class="n">InputT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">Any</span><span class="p">,</span><span class="w"> </span><span class="n">ModelT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BaseModel</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="n">InputT</span><span class="p">):</span><span class="w"> </span><span class="n">ModelT</span>
<span class="p">}</span>
</code></pre></div>
<p><a href="https://github.com/amzn/app-platform/blob/main/presenter/public/src/commonMain/kotlin/software/amazon/app/platform/presenter/BaseModel.kt"><code>Models</code></a>
represent the state of a <code>Presenter</code>. Usually, they’re implemented as immutable, inner data classes of the <code>Presenter</code>.
Using sealed hierarchies is a good practice to allow to differentiate between different states:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">LoginPresenter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MoleculePresenter</span><span class="o">&lt;</span><span class="n">Model</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">sealed</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nc">Model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BaseModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="nc">LoggedOut</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Model</span>

<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">LoggedIn</span><span class="p">(</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">user</span><span class="p">:</span><span class="w"> </span><span class="n">User</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Model</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Notice that it’s recommended even for <code>Presenters</code> to follow the dependency inversion principle. <code>LoginPresenter</code> is
an interface and there can be multiple implementations.</p>
<details class="example">
<summary>Sample</summary>
<p>The sample application follows the same principle of dependency inversion. E.g. the API of the
<a href="https://github.com/amzn/app-platform/blob/main/sample/login/public/src/commonMain/kotlin/software/amazon/app/platform/sample/login/LoginPresenter.kt"><code>LoginPresenter</code></a>
is part of the <code>:public</code> module, while the implementation <a href="https://github.com/amzn/app-platform/blob/main/sample/login/impl/src/commonMain/kotlin/software/amazon/app/platform/sample/login/LoginPresenterImpl.kt"><code>LoginPresenterImpl</code></a>
lives in the <code>:impl</code> module. This abstraction is used in tests, where <a href="https://github.com/amzn/app-platform/blob/main/sample/navigation/impl/src/commonTest/kotlin/software/amazon/app/platform/sample/navigation/NavigationPresenterImplTest.kt#L45-L49"><code>FakeLoginPresenter</code></a>
simplifies the test setup of classes relying on <code>LoginPresenter</code>.</p>
</details>
<p>Observers of the state of a <code>Presenter</code>, such as the UI layer, communicate back to the <code>Presenter</code> through events.
Events are sent through a lambda in the <code>Model</code>, which the <code>Presenter</code> must provide:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">LoginPresenter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MoleculePresenter</span><span class="o">&lt;</span><span class="kt">Unit</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kd">sealed</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nc">Event</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="nc">Logout</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Event</span>

<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">ChangeName</span><span class="p">(</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">newName</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Event</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">sealed</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nc">Model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">BaseModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="nc">LoggedOut</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Model</span>

<span class="w">    </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">LoggedIn</span><span class="p">(</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">user</span><span class="p">:</span><span class="w"> </span><span class="n">User</span><span class="p">,</span>
<span class="hll"><span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">onEvent</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">Event</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">Unit</span><span class="p">,</span>
</span><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Model</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>A concrete implementation of <code>LoginPresenter</code> could look like this:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Inject</span>
<span class="nd">@ContributesBinding</span><span class="p">(</span><span class="n">AppScope</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">AmazonLoginPresenter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">..</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">LoggedIn</span><span class="p">(</span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">is</span><span class="w"> </span><span class="n">Logout</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">..</span>
<span class="w">          </span><span class="k">is</span><span class="w"> </span><span class="n">ChangeName</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">..</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">LoggedOut</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>MoleculePresenters</code> are never singletons. While they use <code>kotlin-inject-anvil</code> for constructor injection and
automatically bind the concrete implementation to an API using <code>@ContributesBinding</code>, they don&rsquo;t use the
<code>@SingleIn</code> annotation. <code>MoleculePresenters</code> manage their state in the <code>@Composable</code> function with the Compose
runtime. Therefore, it&rsquo;s strongly discouraged to have any class properties.</p>
</div>
<h2 id="model-driven-navigation">Model driven navigation<a class="headerlink" href="#model-driven-navigation" title="Permanent link">&para;</a></h2>
<p><code>Presenters</code> are composable, meaning that one presenter could combine N other presenters into a single stream of
model objects. With that concept in mind we can decompose large presenters into multiple smaller ones. Not only
do they become easier to change, maintain and test, but we can also share and reuse presenters between multiple
screens if needed. Presenters form a tree with nested presenters. They’re unaware of their parent and communicate
upwards only through their <code>Model</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">OnboardingPresenterImpl</span><span class="p">(</span>
<span class="w">  </span><span class="c1">// Make presenters lazy to only instantiate them when they&#39;re actually needed.</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyLoginPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="p">,</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyRegistrationPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">RegistrationPresenter</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OnboardingPresenter</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">BaseModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mustRegister</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Remember the presenter to avoid creating a new one during each</span>
<span class="w">      </span><span class="c1">// composition (in other words when computing a new model).</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">registrationPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyRegistrationPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="hll"><span class="w">      </span><span class="n">registrationPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">loginPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyLoginPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="hll"><span class="w">      </span><span class="n">loginPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
</span><span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Notice how the parent presenter calls the <code>@Composable</code> <code>present()</code> function from the child presenters like
a regular function to compute their model and return it.</p>
<details class="example">
<summary>Sample</summary>
<p><a href="https://github.com/amzn/app-platform/blob/main/sample/navigation/impl/src/commonMain/kotlin/software/amazon/app/platform/sample/navigation/NavigationPresenterImpl.kt"><code>NavigationPresenterImpl</code></a>
is another example that highlights this principle.</p>
<p><a href="https://github.com/amzn/app-platform/blob/main/sample/user/impl/src/commonMain/kotlin/software/amazon/app/platform/sample/user/UserPagePresenterImpl.kt"><code>UserPagePresenterImpl</code></a>
goes a step further. Its <code>BaseModel</code> is composed of two sub-models. The <code>listModel</code> is even an input for the
detail-presenter.</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">listModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userPageListPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="n">UserPageListPresenter</span><span class="p">.</span><span class="na">Input</span><span class="p">(</span><span class="n">user</span><span class="p">))</span>
<span class="k">return</span><span class="w"> </span><span class="n">Model</span><span class="p">(</span>
<span class="w">  </span><span class="n">listModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listModel</span><span class="p">,</span>
<span class="w">  </span><span class="n">detailModel</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">userPageDetailPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span>
<span class="w">      </span><span class="n">UserPageDetailPresenter</span><span class="p">.</span><span class="na">Input</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">selectedAttribute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listModel</span><span class="p">.</span><span class="na">selectedIndex</span><span class="p">)</span>
<span class="w">    </span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div>
</details>
<p>This concept allows us to implement model-driven navigation. By driving the entire UI layer through <code>Presenters</code> and
emitted <code>Models</code> navigation becomes a first class API and testable. Imagine having a root presenter implementing a
back stack that forwards the model of the top most presenter. When the user navigates to a new screen, then the
root presenter would add a new presenter to the stack and provide its model object.</p>
<pre class="mermaid"><code>%%{init: {'themeCSS': '.label { font-family: monospace; }'}}%%
graph TD
  login["`Login presenter`"]
  registration["`Register presenter`"]
  onboarding["`Onboarding presenter`"]
  delivery["`Delivery presenter`"]
  settings["`Settings presenter`"]
  root["`Root presenter`"]
  ui["`UI Layer`"]

  login --&gt; onboarding
  registration --&gt; onboarding
  onboarding --&gt; root
  delivery --&gt; root
  settings --&gt; root
  root --&gt; ui

  style ui stroke:#0f0</code></pre>
<p>In the example above, the root presenter would forward the model of the onboarding, delivery or settings presenter
to the UI layer. The onboarding presenter as shown in the code example can either call the login or registration
presenter based on a condition. With Molecule calling a child presenter is as easy as invoking a function.</p>
<h2 id="parent-child-communication">Parent child communication<a class="headerlink" href="#parent-child-communication" title="Permanent link">&para;</a></h2>
<p>While the pattern isn’t used frequently, parent presenters can provide input to their child presenters. The
returned model from the child presenter can be used further to change the control flow.</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">ChildPresenter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MoleculePresenter</span><span class="o">&lt;</span><span class="n">Input</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Input</span><span class="p">(</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">argument</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">ParentPresenterImpl</span><span class="p">(</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyChildPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ChildPresenter</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ParentPresenter</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">childPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyChildPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">childModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">childPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="n">Input</span><span class="p">(</span><span class="n">argument</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;abc&quot;</span><span class="p">))</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">childModel</span><span class="p">...)</span><span class="w"> </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This mechanism is favored less, because it only allows for direct parent to child presenter interactions and
becomes hard to manage for deeply nested hierarchies. More often a service object is injected instead, which
is used by the multiple presenters:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">AccountManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">currentAccount</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span>

<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">mustRegister</span><span class="p">():</span><span class="w"> </span><span class="kt">Boolean</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">AmazonLoginPresenter</span><span class="p">(</span>
<span class="hll"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">accountManager</span><span class="p">:</span><span class="w"> </span><span class="n">AccountManager</span>
</span><span class="p">):</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">account</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">accountManager</span><span class="p">.</span><span class="na">currentAccount</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>
</span><span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">OnboardingPresenterImpl</span><span class="p">(</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyLoginPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="p">,</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyRegistrationPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">RegistrationPresenter</span><span class="p">,</span>
<span class="hll"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">accountManager</span><span class="p">:</span><span class="w"> </span><span class="n">AccountManager</span><span class="p">,</span>
</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OnboardingPresenter</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">BaseModel</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">account</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">accountManager</span><span class="p">.</span><span class="na">currentAccount</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>
</span><span class="w">    </span><span class="p">...</span>

<span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">accountManager</span><span class="p">.</span><span class="na">mustRegister</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">registrationPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyRegistrationPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="n">registrationPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">loginPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyLoginPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="n">loginPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This example shows how <code>AccountManager</code> holds state and is injected into multiple presenters instead of relying
on presenter inputs.</p>
<h2 id="launching">Launching<a class="headerlink" href="#launching" title="Permanent link">&para;</a></h2>
<p><code>MoleculePresenters</code> can inject other presenters and call their <code>present()</code> function inline. If you are already in a
composable UI context, then you can simply call the presenter to compute the model:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">mainViewController</span><span class="p">():</span><span class="w"> </span><span class="n">UIViewController</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ComposeUIViewController</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">presenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">presenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>In this example the <code>LoginPresenter</code> model is computed from an iOS Compose Multiplatform function.</p>
<p>In other scenarios a composable context may not be available and it&rsquo;s necessary to turn the <code>@Composable</code> functions
into a <code>StateFlow</code> for consumption.</p>
<p><a href="https://github.com/amzn/app-platform/blob/main/presenter-molecule/public/src/commonMain/kotlin/software/amazon/app/platform/presenter/molecule/MoleculeScope.kt"><code>MoleculeScope</code></a>
helps to turn a <code>MoleculePresenter</code> into a <code>Presenter</code>, which then exposes a <code>StateFlow</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">stateFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moleculeScope</span>
<span class="w">  </span><span class="p">.</span><span class="na">launchMoleculePresenter</span><span class="p">(</span>
<span class="w">    </span><span class="n">presenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myPresenter</span><span class="p">,</span>
<span class="w">    </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Unit</span><span class="p">,</span>
<span class="w">  </span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="na">model</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>MoleculeScope</code> wraps a <code>CoroutineScope</code>. The presenter keeps running, recomposing and producing new models
until the <code>MoleculeScope</code> is canceled. If the <code>MoleculeScope</code> is never canceled, then presenters leak and will
cause issues later.</p>
<p>Use <a href="https://github.com/amzn/app-platform/blob/main/presenter-molecule/public/src/commonMain/kotlin/software/amazon/app/platform/presenter/molecule/MoleculeScopeFactory.kt"><code>MoleculeScopeFactory</code></a>
to create a new <code>MoleculeScope</code> instance and call <code>cancel()</code> when you don&rsquo;t need it anymore.</p>
<p>On Android an implementation using <code>ViewModels</code> may look like this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MainActivityViewModel</span><span class="p">(</span>
<span class="w">  </span><span class="n">moleculeScopeFactory</span><span class="p">:</span><span class="w"> </span><span class="n">MoleculeScopeFactory</span><span class="p">,</span>
<span class="w">  </span><span class="n">myPresenter</span><span class="p">:</span><span class="w"> </span><span class="n">MyPresenter</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">moleculeScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moleculeScopeFactory</span><span class="p">.</span><span class="na">createMoleculeScope</span><span class="p">()</span>

<span class="w">  </span><span class="c1">// Expose the models for consumption.</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">models</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moleculeScope</span>
<span class="w">    </span><span class="p">.</span><span class="na">launchMoleculePresenter</span><span class="p">(</span>
<span class="w">      </span><span class="n">presenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myPresenter</span><span class="p">,</span>
<span class="w">      </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">Unit</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">models</span>

<span class="w">  </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCleared</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">moleculeScope</span><span class="p">.</span><span class="na">cancel</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>By default <code>MoleculeScope</code> uses the main thread for running presenters and
<a href="https://github.com/cashapp/molecule/blob/trunk/molecule-runtime/src/commonMain/kotlin/app/cash/molecule/RecompositionMode.kt"><code>RecompositionMode.ContextClock</code></a>,
meaning a new model is produced only once per UI frame and further changes are conflated.</p>
<p>This behavior can be changed by creating a custom <code>MoleculeScope</code>, e.g. tests make use of this:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="n">TestScope</span><span class="p">.</span><span class="nf">moleculeScope</span><span class="p">(</span>
<span class="w">  </span><span class="n">coroutineContext</span><span class="p">:</span><span class="w"> </span><span class="n">CoroutineContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EmptyCoroutineContext</span>
<span class="p">):</span><span class="w"> </span><span class="n">MoleculeScope</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">scope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">backgroundScope</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">CoroutineName</span><span class="p">(</span><span class="s">&quot;TestMoleculeScope&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coroutineContext</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">MoleculeScope</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">RecompositionMode</span><span class="p">.</span><span class="na">Immediate</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</div>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>A <a href="https://github.com/amzn/app-platform/blob/main/presenter-molecule/testing/src/commonMain/kotlin/software/amazon/app/platform/presenter/molecule/TestPresenter.kt"><code>test()</code></a>
utility function is provided to make testing <code>MoleculePresenters</code> easy using the <a href="https://github.com/cashapp/turbine/">Turbine</a>
library:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">LoginPresenterImplTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Test</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">`after 1 second the user is logged in after pressing the login button`</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">userManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FakeUserManager</span><span class="p">()</span>

<span class="w">    </span><span class="n">LoginPresenterImpl</span><span class="p">(</span><span class="n">userManager</span><span class="p">).</span><span class="na">test</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">firstModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">awaitItem</span><span class="p">()</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>test()</code> function uses the <code>TestScope.backgroundScope</code> to run the presenter.</p>
<details class="example">
<summary>Sample</summary>
<p>The sample application implements multiple tests for its presenters, e.g.
<a href="https://github.com/amzn/app-platform/blob/main/sample/login/impl/src/commonTest/kotlin/software/amazon/app/platform/sample/login/LoginPresenterImplTest.kt"><code>LoginPresenterImplTest</code></a>,
<a href="https://github.com/amzn/app-platform/blob/main/sample/navigation/impl/src/commonTest/kotlin/software/amazon/app/platform/sample/navigation/NavigationPresenterImplTest.kt"><code>NavigationPresenterImplTest</code></a>
and <a href="https://github.com/amzn/app-platform/blob/main/sample/user/impl/src/commonTest/kotlin/software/amazon/app/platform/sample/user/UserPagePresenterImplTest.kt"><code>UserPagePresenterImplTest</code></a>.</p>
</details>
<h2 id="compose-runtime">Compose runtime<a class="headerlink" href="#compose-runtime" title="Permanent link">&para;</a></h2>
<p>One of the major benefits of using Compose through Molecule is how the framework turns reactive streams such as
<code>Flow</code> and <code>StateFlow</code> into imperative code, which then becomes easier to understand, write and maintain.
Composable functions have a lifecycle, they enter a composition (the presenter starts to be used) and leave
a composition (the presenter is no longer used). Properties can be made reactive and trigger creating a
new <code>Model</code> whenever they change.</p>
<h3 id="lifecycle">Lifecycle<a class="headerlink" href="#lifecycle" title="Permanent link">&para;</a></h3>
<p>This example contains two child presenters:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">OnboardingPresenterImpl</span><span class="p">(</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyLoginPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="p">,</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">lazyRegistrationPresenter</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">RegistrationPresenter</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">OnboardingPresenter</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">BaseModel</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mustRegister</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">registrationPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyRegistrationPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="n">registrationPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">val</span><span class="w"> </span><span class="nv">loginPresenter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">lazyLoginPresenter</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="n">loginPresenter</span><span class="p">.</span><span class="na">present</span><span class="p">(</span><span class="kt">Unit</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>On the first composition, when <code>OnboardingPresenterImpl.present()</code> is called for the first time, the lifecycle of
<code>OnboardingPresenterImpl</code> starts. Let’s assume <code>mustRegister</code> is true, then <code>RegistrationPresenter</code> gets called
and its lifecycle starts as well. In the example when <code>mustRegister</code> switches to false, then <code>RegistrationPresenter</code>
leaves the composition and its lifecycle ends. <code>LoginPresenter</code> enters the composition and its lifecycle starts.
If the parent presenter of <code>OnboardingPresenterImpl</code> stops calling this presenter, then <code>OnboardingPresenterImpl</code>
and <code>LoginPresenter</code> would leave composition and both of their lifecycles end.</p>
<h3 id="state">State<a class="headerlink" href="#state" title="Permanent link">&para;</a></h3>
<p><a href="https://developer.android.com/develop/ui/compose/state">Google’s guide</a> for state management is a good starting
point. APIs most often used are <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#remember(kotlin.Function0)"><code>remember()</code></a>,
<a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#mutableStateOf(kotlin.Any,androidx.compose.runtime.SnapshotMutationPolicy)"><code>mutableStateOf()</code></a>,
<a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#(kotlinx.coroutines.flow.StateFlow).collectAsState(kotlin.coroutines.CoroutineContext)"><code>collectAsState()</code></a>
and <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#produceState(kotlin.Any,kotlin.coroutines.SuspendFunction1)"><code>produceState()</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nv">toggled</span><span class="p">:</span><span class="w"> </span><span class="kt">Boolean</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Model</span><span class="p">(</span>
<span class="w">    </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">toggled</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;toggled&quot;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s">&quot;not toggled&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">is</span><span class="w"> </span><span class="n">ToggleClicked</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">toggled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">toggled</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In this example, whenever the Presenter receives the <code>ToggleClicked</code> event, then the state <code>toggled</code> changes.
This triggers a recomposition in the Compose runtime and will call <code>present()</code> again to compute a new <code>Model</code>.</p>
<p><code>Flows</code> can easily be observed using <code>collectAsState()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">AccountManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">currentAccount</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">AmazonLoginPresenter</span><span class="p">(</span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">accountManager</span><span class="p">:</span><span class="w"> </span><span class="n">AccountManager</span>
<span class="p">):</span><span class="w"> </span><span class="n">LoginPresenter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">account</span><span class="p">:</span><span class="w"> </span><span class="n">Account</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">accountManager</span><span class="p">.</span><span class="na">currentAccount</span><span class="p">.</span><span class="na">collectAsState</span><span class="p">()</span>
</span><span class="w">    </span><span class="p">...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Whenever the <code>currentAccount</code> Flow emits a new <code>Account</code>, then the Compose runtime will trigger a recomposition
and a new <code>Model</code> will be computed.</p>
<h3 id="side-effects">Side effects<a class="headerlink" href="#side-effects" title="Permanent link">&para;</a></h3>
<p>It’s recommended to read <a href="https://developer.android.com/jetpack/compose/side-effects">Google’s guide</a>. Since
composable functions come with a lifecycle, async operations can safely be launched and get automatically torn
down when the <code>Presenter</code> leaves the composition. Commonly used APIs are
<a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#LaunchedEffect(kotlin.Any,kotlin.coroutines.SuspendFunction1)"><code>LaunchedEffect()</code></a>,
<a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#DisposableEffect(kotlin.Any,kotlin.Function1)"><code>DisposableEffect()</code></a>
and <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#rememberCoroutineScope(kotlin.Function0)"><code>rememberCoroutineScope()</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">LaunchedEffect</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// This is within a CoroutineScope and suspending functions can</span>
<span class="w">    </span><span class="c1">// be called:</span>
<span class="w">    </span><span class="n">flowOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">).</span><span class="na">collect</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>If the <code>key</code> changes between compositions, then a new coroutine is launched and the previous one canceled. For more
details see <a href="https://developer.android.com/jetpack/compose/side-effects#launchedeffect">here</a>.</p>
<p>This is an example for how one would use <code>rememberCoroutineScope()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">present</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="kt">Unit</span><span class="p">):</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">coroutineScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rememberCoroutineScope</span><span class="p">()</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Model</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="p">(</span><span class="nb">it</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">is</span><span class="w"> </span><span class="n">OnClick</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">coroutineScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>When the <code>Presenter</code> leaves composition, then all jobs launched by this coroutine scope get canceled. For more
details see <a href="https://developer.android.com/jetpack/compose/side-effects#remembercoroutinescope">here</a>.</p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow", "toc.integrate", "content.tabs.link"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>